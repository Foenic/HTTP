# 第一章 了解Web及网络基础

> 摘要：
>
> 本章概述了 Web 是建立在何种技术基础上，以及  HTTP协议 是如何诞生并发展的。我们从其背景着手，来深入了解这部分内容。

## 1.使用 HTTP 协议访问 Web

> 网页浏览器地址栏输入 URL 时，Web 页面呈现方式：
>
> - 信息送至对应服务器的 URL 地址
> - 服务器回复内容，显示在Web
>
> ---
>
> Web 浏览器从 Web 服务器端获取文件资源（ resource）等信息
>
> 客户端（client）：发送请求
>
> ---
>
> Web 建立在HTTP协议上通信。
>
> Client 通过指定访问地址获取（或上传）服务器资源（文件等信息）
>
> Client~Server通信方式：HTTP（Hyper Text Transfer Protocol 超文本传输协议）

## 2 HTTP 诞生

### 1.为知识共享而规划的Web

> - 1989-3 HTTP 诞生 （WWW提议致力于群世界研究者知识共享）
> - CERN 蒂姆 * 帕纳斯-李 提出让远隔两地的研究者们共享知识的设想
> - 多文档互联形成超文本
> - 三项 WWW 构建技术：
>   - SGML （Standard Generalized Markup Language, 标准通用标记语言）作为页面标记语言的 HTML）
>   - 作为文档传递协议的 HTTP
>   - 指定文档所在地址的 URL （ Uniform Resource Locator，统一资源定位符）
> - Web：浏览超文本客户端程序

### 2.Web 的成长时代

> 1990-11 **CERN** 成功研发世界第一台 Web 服务器和 Web 浏览器。
>
> 1990-9 第一个日本主页上线
>
> - 第一个主页：
>
>   http://www.ibarakiken.gr.jp/www/
>
>   90年，对HTML 1.0草案讨论，存在多处模糊不清的地方，草案直接废弃。
>
> - HTML 1.0
>
>   http://www.w3.org/MarkUp/draft-ietf-iiir-html-01.txt
>
>    

### 3.驻足不前的 HTTP



## 3 网络基础 TCP / IP

> 网络实在 TCP / IP 协议族的基础上运作的。HTTP 属于内部的子集。

### 1 TCP / IP 协议族 （通信协议总称）

> 协议：通信规则
>
> TCP / IP:
>
> - IEEE
> - FDDI
> - ICMP
> - TCP
> - IP
> - HTTP
> - UDP
> - SNMP
>
> ---
>
> 协议内容：
>
> - 电缆规格
> - IP 地址选定方法
> - 寻找异地用户方法
> - 双方建立通信的顺序
> - Web 页面显示需要的处理步骤
> - ……
>
> ---
>
> TCP / IP：
>
> - 互联网相关协议总称
>
> - TCP 和 IP 这两种协议
> - 在 IP 通信过程中使用的协议族

###  2 TCP / IP 的分层管理

> - 应用层
> - 传输层
> - 网络层
> - 数据链路层

---

层次化好处：

> 1. **改动方便**：
>
>    如果仅使用一个协议，那么当其中的某一部分发生改变的时候，就需要把整体全部替换掉。
>
> 2. **设计简单**：
>
>    使用分层时候，仅需要替换改变的层的内容，只需要把每层之间的**接口部分**定义规划好，那么各层内部就可以随意改变，更加灵活自由，在设计上也简单很多。

各个层次作用：

> 1. **应用层**
>
>    - 决定了向用户提供应用服务时通信的活动。
>    - 协议族内与存了各类通用的应用服务。
>    - TCP/IP 协议族内预存了各类通用的应用服务：
>      - FTP （FileTransfer Protocol，文件传输协议）
>      - DNS（Domain Name System，域名系统）服务
>    - HTTP
>
> 2. **传输层**
>
>    - 传输层对上层应用层，提供处于网络连接中的两台计算机之间的
>      数据传输。
>    - 两个性质不同的协议：
>      - TCP（Transmission Control Protocol，传输控制协议）
>      -  UDP（User Data Protocol，用户数据报协议）
>
> 3. **网络层（又名网络互连层）**
>
>    - 网络层用来处理在网络上流动的数据包
>
>    - 数据包是网络传输的最小数据单位。
>
>    - 规定了通过怎样的路径（所谓的传输路线）到达对方计算机，并把数据包传送给对方。
>
>    - 路由选择：
>
>      与对方计算机之间通过多台计算机或网络设备进行传输时，网络层所起的作用就是在众多的选项内选择一条传输路线。
>
> 4. **链路层（又名数据链路层，网络接口层）**
>
>    - 用来处理连接网络的硬件部分
>      1. 控制操作系统
>      2. 硬件的设备驱动
>      3. NIC（Network Interface Card，网络适配器，即网卡）
>      4. 光纤
>      5. ……
>    - 硬件上的范畴均在链路层的作用范围之内。

### 3 TCP/IP 通信传输流

<img src="图解HTTP.assets/image-20200507142011596.png" alt="image-20200507142011596" style="zoom:67%;" />

网络通信顺序：

> 分层顺序：发送端从上到下，接收端从下到上

HTTP 过程

> 1. 应用层
>
>    作为发送端的客户端在应用层（HTTP）发出一个想看某个 Web 页面的 HTTP 请求
>
> 2. 传输层 （TCP）
>
>    把从应用层出接收到的数据（HTTP 请求报文）进行分割，
>
>    在各个报文上打上标记序号及端口号转发给网络层
>
> 3. 网络层（IP）
>
>    增加作为通信目的地的 MAC 地址后转发给链路层
>
>    至此，通信请求准备完全
>
> 4. 接收端服务器在链路层接收数据
>
>    按序向上层发送，一直到应用层
>
>    接收 HTTP 请求结束
>
>    <img src="图解HTTP.assets/image-20200507150203141.png" alt="image-20200507150203141" style="zoom:67%;" />
>
>    **封装：**
>
>    发送端在层与层之间传输数据时，每经过一层时必定会被打上一个该层所属的首部信息。
>
>    反之，接收端在层与层传输数据时，每经过一层时会把对应的首部消去。

### 4 与 HTTP 关系密切的协议：IP、TCP 和 DNS

#### 1 负责传输的 IP 协议（网络层）InternetProtocol

> 几乎所有使用网络的系统都会用到 IP 协议。
>
> TCP/IP 协议族中的 IP 指的就是**网际协议**，协议名称中占据了一半位置，其重要性可见一斑。
>
> IP 不同于 IP 地址，IP 是一种协议名称。
>
> IP 协议的作用是把各种数据包传送给对方。
>
> 确保传输的条件：
>
> | IP 地址  | IP 地址指明了节点被分配到的地址  | 可变换   |
> | -------- | -------------------------------- | -------- |
> | MAC 地址 | MAC 地址是指网卡所属的固定地址。 | 不可变换 |
>
> IP 地址可以和 MAC 地址进行配对

##### 使用 ARP 协议凭借 MAC 地址进行通信

> IP 间通信依赖 MAC 地址
>
> > 网络上，通信双方在同一局域网（LAN）情况非常少
> >
> > 通常经过多台计算机 和网络设备中转才能链接
> >
> > 中转时，利用下一站中转设备的 MAC 地址来搜索下一个中转目标
> >
> > ARP （Address Resolution Protocol）协议
> >
> > ​	以解析地址的协议，根据通信方的 IP 地址就可以反查出对应的 MAC 地址。

##### 没有人能过全面掌握网络中的传输情况

到达通信目标前的中转过程： （**路由选择机制**)

> 那些计算机和路由器等网络设备只能获悉很**粗略的传输路线**
>
> 类似送快递过程
>
> <img src="图解HTTP.assets/image-20200507215355238.png" alt="image-20200507215355238" style="zoom:67%;" />

##### **确保可靠性的 TCP 协议**

> TCP 位于传输层，提供可靠的字节流服务

- 字节流服务（Byte Stream Service）

  > 为了方便传输，将大块数据分割成以**报文段（segment）**为单位的数据包进行管理

- 可靠的传输服务

  > 能够把数据准确可靠地传给对方

  ---

  > TCP 协议为了更容易传送大数据才把数据分割，
  >
  > 而且 TCP 协议能够确认数据最终是否送达到对方。

###### 确保数据能到达目标 三次握手

TCP 协议三次握手：

> 用 TCP 协议把数据包送出去后一定会向对方确认是否成功送达。
>
> 1. 发送端首先发送一个带 SYN 标志的数据包给对方。
> 2. 接收端收到后，回传一个带有 SYN/ACK 标志的数据包以示传达确认信息。
> 3. 发送端再回传一个带 ACK 标志的数据包，代表“握手”结束。
> 4. 中断重新发送

<img src="图解HTTP.assets/image-20200508113709151.png" alt="image-20200508113709151" style="zoom:67%;" />

  除了上述三次握手，TCP 协议还有其他各种手段来保证通信的可靠性。

### 5 负责域名解析的 DNS 服务

> 提供域名到 IP 地址之间的解析服务 （应用层）